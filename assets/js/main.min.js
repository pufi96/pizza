$(document).ready((function(){$(".menuWrap").find(".range").on("input change",(function(e){$(this).parents(".menuWrap").find(".rangeV").html($(this).val())})),$(".rate").on("click",(function(e){var self=this,findIt=$(this).parents(".menuWrap");$.ajax({type:"POST",url:"assets/fixed/rateAction.php",data:{idMenu:findIt.find(".idMenu").val(),ratingValue:findIt.find(".range").val()},success:function name(response){response.success&&(findIt.find(".rating").html(response.data),findIt.find(".rateMessage").html(response.message))},error:function(response){400==response.status&&findIt.find(".rateMessage").html(response.responseJSON.message)}})})),$("form#registarForm").on("submit",(function(event){var html="",firstName=$("input[type='text'][name='fName']"),lastName=$("input[type='text'][name='lName']"),email=$("input[type='email'][name='email']"),password=$("input[type='password'][name='password']"),gender=$("input[type='radio'][name='gender']:checked"),address,register=[firstName,lastName,email,password,gender,$("input[type='text'][name='address']")],reName=/^([A-ZĐŽŠČĆ][a-zđžščć]{2,20})+$/,reEmail,rePassword,reGender,reAddress,regex=[reName,reName,/^[a-z][\w\.]*\@[a-z0-9]{3,20}(\.[a-z]{3,5})?\.[a-z]{2,3}$/,/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[.@$!%*?&])[A-Za-z\d@$!%*?&.]{8,}$/,/^(female|male)$/,/^[A-Z][a-z]*[\s\w]+$/],validator=0,errors=["First name must have first letters uppercase and minimum 3 letters in total.","Last name must have first letters uppercase and minimum 3 letters in total.","Email is required.","Password must have minimum 8 caracters which have 1 upper case, 1 lower case, number and special caracter.","Gender is required.","Address start with first letter upper."];for(let i=0;i<register.length;i++){const element=register[i],reg=regex[i],error=errors[i];reg.test(element.val())?(element!=gender&&element.html(""),element.next("p").html(""),element.removeClass("borderRed"),element.next("p").removeClass("textRed")):(element!=gender&&element.html(""),element.next("p").html(error),element.addClass("borderRed"),element.next("p").addClass("textRed"),validator++)}0!=validator&&(html="<p>Fill form correctly</p>",$("#reggisterConfirm").addClass("alert alert-danger"),$("#registerConfirm").html(html),event.preventDefault())})),$("#bookForm").on("submit",(function(eventBook){var html="",firstName=$("input[type='text'][name='fName']").val(),lastName=$("input[type='text'][name='lName']").val(),email=$("input[type='email'][name='email']").val(),number=$("input[type='number'][name='number']").val(),date=$("input[type='date'][name='date']").val(),time=$("input[type='time'][name='time']").val(),message=$("textarea[name='message']").val(),reName=/^[A-ZĐŽŠČĆ][a-zđžščć]{2,20}$/,reEmail=/^[a-z][\w\.]*\@[a-z0-9]{3,20}(\.[a-z]{3,5})?\.[a-z]{2,3}$/,reNumber=/^[0-9]{7,11}$/,today=new Date,reDate=today.getFullYear()+"-"+("0"+(today.getMonth()+1)).slice(-2)+"-"+("0"+today.getDate()).slice(-2);console.log(date.val()),console.log(reDate),console.log(message);var reTime=/^(0[8-9]|1[0-9]|2[0-0]):[0-5][0-9]$/,reText=/^[A-z][\w\s\.,?!]*$/,validatorBook=0,bookValidation=[{value:firstName,regex:reName,error:"First name is required. First name must have at least 3 characters and first letter upper and max 20 characters."},{value:lastName,regex:reName,error:"Last name is required. Last name must have at least 3 characters and first letter upper and max 20 characters."},{value:email,regex:reEmail,error:"Email is required."},{value:parseInt(number),regex:reNumber,error:"Number must have min 7 numbers and max 11 numbers."},{value:message,regex:reText,error:"Message is not in text format."}];for(let i=0;i<bookValidation.length;i++)bookValidation[i].value!=message&&(bookValidation[i].regex.test(bookValidation[i].value)?(bookValidation[i].value.html(""),bookValidation[i].value.next("p").html(""),bookValidation[i].value.removeClass("borderRed"),bookValidation[i].value.next("p").removeClass("textRed")):(bookValidation[i].value.html(""),bookValidation[i].value.next("p").html(bookValidation[i].error),bookValidation[i].value.addClass("borderRed"),bookValidation[i].value.next("p").addClass("textRed"),validatorBook++,console.log(bookValidation[i])));date.val()?date.val()<reDate?(date.next("p").html("Please book date that isn't in past."),date.addClass("borderRed"),date.next("p").addClass("textRed"),console.log(validatorBook),validatorBook++):(date.next("p").html(""),date.removeClass("borderRed"),date.next("p").removeClass("textRed")):(date.next("p").html("Please book date that isn't in past."),date.addClass("borderRed"),date.next("p").addClass("textRed"),console.log(validatorBook),validatorBook++),console.log(validatorBook),0!=validatorBook&&(html="<p>Fill form correctly</p>",$("#bookConfirm").addClass("alert alert-danger"),$("#bookConfirm").html(html),eventBook.preventDefault())})),$("#loginForm").on("submit",(function(event){var html="",email,password,reEmail,rePassword,validator=0,loginValidation=[{value:$("input[type='email'][name='email']"),regex:/^[a-z][\w\.]*\@[a-z0-9]{3,20}(\.[a-z]{3,5})?\.[a-z]{2,3}$/,error:"Email is required."},{value:$("input[type='password'][name='password']"),regex:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[.@$!%*?&])[A-Za-z\d@$!%*?&.]{8,}$/,error:"Password must have minimum 8 caracters which have 1 upper case, 1 lower case, number and special caracter."}];for(let i=0;i<loginValidation.length;i++)loginValidation[i].regex.test(loginValidation[i].value.val())?(loginValidation[i].value.html(""),loginValidation[i].value.next("p").html(""),loginValidation[i].value.removeClass("borderRed"),loginValidation[i].value.next("p").removeClass("textRed")):(loginValidation[i].value.html(""),loginValidation[i].value.next("p").html(loginValidation[i].error),loginValidation[i].value.addClass("borderRed"),loginValidation[i].value.next("p").addClass("textRed"),validator++);0!=validator&&(html="<p>Fill form correctly</p>",$("#loginConfirm").addClass("alert alert-danger"),$("#loginConfirm").html(html),event.preventDefault())}))})),$(document).on("click",".page-link, #bthSearchMenu",(function(e){var text=$("#searchMenu").val(),selfPag=this,findIdPag=$(this).data("dt-idx"),user=!!$(this).data("user");$.ajax({type:"POST",url:"assets/fixed/searchPaginationAction.php",data:{idPag:findIdPag,searchText:text},success:function name(response){var html="";if(console.log(response.success),response.success){if(console.log(response.message),console.log(response.data),console.log(response.dataPage),response.dataPage>1){let pagMenu=document.querySelector("#paginationMenu");for(;pagMenu.firstChild;)pagMenu.removeChild(pagMenu.lastChild);let elementDiv=document.createElement("div");elementDiv.classList.add("m-2"),pagMenu.appendChild(elementDiv);let elementUl=document.createElement("ul");elementUl.classList.add("pagination"),elementDiv.appendChild(elementUl);for(let i=1;i<=response.dataPage;i++){let elementLi=document.createElement("li");elementLi.classList.add("paginate_button","page-item","active"),elementUl.appendChild(elementLi);let elementButton=document.createElement("button");elementButton.classList.add("page-link","my-color"),elementButton.setAttribute("aria-controls","dataTable"),elementButton.setAttribute("data-user",user?"true":"false"),elementButton.setAttribute("data-dt-idx",`${i}`),elementButton.setAttribute("tabindex","0"),elementButton.innerHTML=`${i}`,elementLi.appendChild(elementButton)}}else console.log(response.messagePage),document.querySelector("#paginationMenu").innerHTML="";null==response.data?(console.log("123"),$("#menu").addClass("d-flex justify-content-center my-color"),$("#menu").html(response.message)):($.each(response.data,(function(index,value){html+=`<div class="col-lg-4 d-flex ">\n                                    <div class="services-wrap d-flex menuWrap">\n                                        <img class="img imgSrc" src="images/${value.srcImgMenu}.${value.extImgMenu}" alt="${value.altImgMenu}" />\n                                        <div class="text p-4">\n                                            <h3>${value.nameMenu}</h3>\n                                            <p>${value.descMenu}</p>\n                                            <p class="price">\n                                            <p>Price: $${value.priceMenu}</p>\n                                            </p>\n                                            <p>\n                                                <span>Rating: </span>\n                                                <span class="rating">${(Math.round(100*value.average)/100).toFixed(1)}</span>\n                                            </p>`,user&&(html+=`<p>\n                                                <span>Rate: </span>\n                                                <span class="rangeV">5</span>\n                                                <input type="hidden" class="idMenu" name="idMenu" value="${value.idMenu}" />\n                                                <input type="range" min="0" max="5" value="5" class="range" />\n                                            </p>\n                                            <button class="rate btn btn-primary">Rate</button>\n                                            <p class="rateMessage"></p>`),html+="</div>\n                                    </div>\n                                </div>"})),document.querySelector("#responseText").innerHTML="")}else document.querySelector("#paginationMenu").innerHTML="",document.querySelector("#menu").innerHTML="",console.log(response.message),document.querySelector("#responseText").innerHTML=response.message,document.querySelector("#responseText").classList.add("d-flex","justify-content-center","my-color","mt-4");$("#menu").html(html)}})}));